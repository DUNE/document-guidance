\chapter{General Information}
\label{ch:gen}

This volume gives guidance to authors and editors of DUNE documents such as the CDR, TDRs, and so on. It collects ``wisdom'' learned from 
producing earlier documents, including the DUNE CDR, and we will appreciate 
very much if everyone follows it!  It tries to follows its own guidance so that its \LaTeX{} source
provides an example.  

This has been updated for the DUNE TDR. Earlier versions of this guidance document were updated for other important documents, e.g., the CDR and the ProtoDUNE-SP TDR.  These versions can be found on GitHub at \url{https://github.com/DUNE/document-guidance/releases/}.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{What's on the Document Guidance GitHub Web Page?}
\label{sec:gen-webpage}

Information about using GitHub and building a document is on the web page \url{https://github.com/DUNE/document-guidance}:

\begin{itemize}
\item Four important guidelines about interacting with git that will help avoid headaches!
\item How to get started with GitHub and get the files that you need to edit. See both ``Getting Started'' (at the top) and ``Repository'' further down.  ``Repository'' provides commands to use for interacting with GitHub.
\item How to build the document, in draft format (with extra markup) after you have it downloaded to your local machine.
\item How to build a print-ready document -- even though in principle you don't need to do this, you may want to see how it looks. The technical editors will build the final document.
\item How to access builds of the document run automatically from the content on GitHub.
\item How to get away without authoring in \LaTeX{}...
\end{itemize}

Note about Draft vs. Print format: 

Draft format gives you line numbers, ``fixme'' and other markup notes (see Chapter~\ref{ch:review}), 
faint grey notes (enclosed in a box) near labeled items (headings, figures, tables, etc.) to help you know 
what label was used to reference each particular thing.  
It's easiest to trace things when the labels are meaningful, and for figures, when they match the image filename, so please choose labels carefully. Labels are discussed in Section~\ref{sec:latex-intra-doc-ref}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{What's in the Document Guidance GitHub Repository?}
\label{sec:gen-guidance-repo}

This repository contains code for a document with ``all you need to know'' about using /LBNF/DUNE \LaTeX{}  conventions  -- guidance on syntax, chapter structure, English standards, abbreviations, figures, and other things. Please read through it so that you understand the LBNF/DUNE style and structure for documents.  There is customized \LaTeX{} code that you can copy straight from the source for this document and edit for your content.  This is supposed to make it easy!


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{What's in the DUNE TDR GitHub Repository?}
\label{sec:gen-repo}

A document maintained in GitHub pertaining to the overall DUNE enterprise, such as the TDR, may consist of multiple \textit{volumes}\footnote{Some volumes may be written in MS Word, external to a GitHub repository.}.  A document repository holds all the files needed to compile each volume of the document (or the document itself, if it's not broken into volumes). This includes both content files and additional files that set up the configuration, 
contain auxiliary text (e.g., acronym lists, citations), or provide definitions or macros (\texttt{defs.tex}), etc.  Most of these other files are maintained by the technical editor and you should not modify them. You may of course add citations, acronyms, and so forth.   More information on these files is given in Chapter~\ref{ch:tech}.

The DUNE TDR repository is set up with a subdirectory for each volume -- this is where you will do the bulk of your work. In the following, \texttt{volname} represents a label for the volume. The content is
arranged as follows:

\begin{description}
\item[\texttt{common}] a top-level directory that houses several configuration-related files and files that are otherwise used by multiple volumes. The ones you are likely to touch are \texttt{defs.tex}, \texttt{tdr-citedb.bib}, and possibly one or another of the acronym files.
\item[\texttt{volname.tex}] the main file (see Section~\ref{sec:tech-mainfile}) for a volume; there will one of these per volume. They are found in the top-level
  directory. They have no significant content themselves; they just use
  ``includes'' to pull together content contained in their component chapter files. Please do NOT modify any volume file!
\item[\texttt{figures/}] top-level subdirectory for any static figures
  shared by more than one volume in the repository. Typically your figures will be volume-specific and you won't add them here.
\item[\texttt{far-detector-(something)-phase/}] The SP and DP Far Detector technologies will have multiple volumes each. Therefore an extra directory level is inserted at the top level for each, to separately collect the SP and the DP sets of volumes.  
\item[\texttt{volname/}] subdirectory holding all content for one particular volume (under directories of previous bullet for detector volumes). You will work within a given volume subdirectory. 
\item[\texttt{volname/chaptername.tex}] holds the content for one chapter of a volume. You will add or edit content in one or more chapter files.
\item[\texttt{volname/figures/}] subdirectory holding any static volume-specific figures. Your figures will usually go here.
\item[\texttt{volname/generated/}] subdirectory holding any generated
  figures (see Section~\ref{sec:graphic-plots} for info on generated files). Your ROOT plots, for example, will go here.
\end{description}

Multi-volume documents will have an established file naming convention (e.g., the
TDR uses ``\texttt{volume-volumename}''.
Specific files hold chapter-level or section-level content and should be named with some
short, descriptive label, e.g., ``\texttt{chapter-chaptername}.''

\hlfix{As of November 2017, the APA volume  of the TDR has its contents structure set. It should serve as a model for structuring other detector element volumes.}{Notice this!}

Please note:
\begin{itemize}
\item Editors may elect to further break up content into per-section files. If so, follow a naming convention such as ``\texttt{chaptername-sectionname.tex}''.
\item Please do not include a volume, chapter, section or figure number in any file name. Their actual numbers will be determined at compile time according to the configuration and the volume's main file. 
\item If you have questions, consult with one of: \\
  Anne Heavey, aheavey@fnal.gov, 630-840-8039 (technical editor)\\
  Brett Viren, bv@bnl.gov or Dave DeMuth, david.demuth@vcsu.edu (help on graphics, \LaTeX{}, git or Overleaf machinery.)
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Overleaf Editing}
\label{sec:gen-overleaf}

Overleaf is a \LaTeX{} web-based editing utility that provides a real-time WYSIWYG environment. Membership is free: www.overleaf.com

By going into your local git repository an Overleaf importable .zip file is generated via the line command: \texttt{\$ git archive -o latest.zip HEAD}

At Overleaf, select NEW PROJECT
\fixme{instructions not yet complete; also see Technical Proposal page on the dune wiki}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{If you read nothing else in this document...}
\label{sec:gen-nothing}

... at least remember that it is here for reference!

%%%%%%%%
\textbf{Macros (Definitions):}

\begin{framed}
We recommend that you use (and add to, as needed) macros defined in \texttt{common/defs.txt} for complicated expressions like 
\begin{verbatim}
$\bar\nu_\mu$.
\end{verbatim}
 Clearly, typing a macro like 
 \begin{verbatim}
\anumu
\end{verbatim} 
is easier and much less error-prone than the full expression.
%\verb|\newcommand{\anumu}{$\bar\nu_\mu$\xspace}|. Clearly, typing \verb|\anumu| is much less error-prone than the full expression.
Find more information in Section~\ref{sec:latex-terms}.
\end{framed}

%%%%%%%%
\textbf{Fixmes:}

\begin{framed}
As in ``fix me!'' If you're not sure about something or you find an error that somebody else has to fix, use:
\begin{verbatim}
\fixme{This is a fixme.}
\end{verbatim}
More info and other options are in Chapter~\ref{ch:review}.
\end{framed}

%%%%%%%%
\textbf{Figures:}

\begin{framed}
\begin{verbatim}
    \begin{dunefigure}[optional caption for LoF]{fig:required-label}
     {required full caption (Credit: xyz)}
    \includegraphics[width=0.8\textwidth]{image-filename}
    \end{dunefigure}
\end{verbatim}
To reference: \verb|See Figure~\ref{fig:required-label}|.
Please make \verb|required-label| the same as \verb|image-filename|. 

Please check that your figures are reasonably sized. We may want to add this document to the arXiv, which has a 10\,MB limit per document; bloated figures can use that up quickly. Find more information in Section~\ref{sec:latex-figures}.

Mac users: Please avoid the use of capital letters in graphics filenames; it causes errors that you don't catch when compiling locally on your system. The Mac file systems are not truly case-sensitive, and a mismatch in the capitalization of graphics file names causes problems down the line in the repository.
\end{framed}

%%%%%%%%
\textbf{Tables:}

\begin{framed}
\begin{verbatim}
\begin{dunetable}
[The LoT caption]
{cc}
{tab:table-label}
{The full caption that appears above the table.}
  Rows & Counts \\ \toprowrule
  Row 1 & First \\ \colhline
  Row 2 & Second \\ \colhline
  Row 3 & Third \\ 
\end{dunetable}
\end{verbatim}
To reference: \verb|See Table~\ref{tab:table-label}|. The ``cc'' means: ``two columns, both centered.'' You can substitute ``l'' or ``r'' to left- or right-justify a column's contents. Use \verb|p{'width'}| if you need a column's contents to wrap to multiple lines.

Find more information in Section~\ref{sec:latex-tables}.
\end{framed}
%%%%%%%%
\textbf{Citations:}
\begin{framed}
They go in \texttt{common/tdr-citedb.bib}. When adding citations to this file, copy the BibTeX rendering of the citation from \url{http://inspirehep.net} if it exists there. (We have left a well-populated \texttt{common/citedb.bib} in the TDR directory in case you want to search for a citation
 that may have appeared in the CDR, or other DUNE/LBNF document.) E.g.,

\begin{verbatim}
 @article{Gando:2010aa,
      author         = {A.~Gando and others},
      title          = "{Constraints on $\theta_{13}$ from A Three-Flavor ...}",
      journal        = {Phys.Rev.D},
      volume         = {83},
      pages          = {052002},
      year           = {2011},
      note           = {arXiv:1009.4771 [hep-ex]},
}
\end{verbatim}
 To reference it within a file, use, e.g.,  \verb|\cite{Gando:2010aa}|.
Find more information in Section~\ref{sec:latex-cit}.
\end{framed}

%%%%%%%%
\textbf{Sectioning:}

\begin{framed}
\begin{verbatim}
\chapter{A Chapter}
\label{ch:blah}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{A Section}
\label{sec:blah-sec1}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{A Subsection}
\label{sec:blah-sec1-subsec1}

%%%%%%%%%%%%%%%%%%%%
\subsubsection{A Subsubsection}
\label{sec:blah-sec1-subsec1-subsubsec1}
\end{verbatim}
Find more information in Section~\ref{sec:latex-sectioning}.
\end{framed}
